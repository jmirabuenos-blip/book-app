{% extends 'myapp/base.html' %}

{% block title %}Book List - Book Manager{% endblock %}

{% block content %}
<h1 class="text-center my-4 display-5">Book Catalog</h1>

<div class="mb-5 text-center">
    <a href="{% url 'book_create' %}" class="btn btn-primary btn-lg shadow-sm">
        <i class="bi bi-plus-circle me-2"></i> Add New Book
    </a>
</div>

<style>
/* --- INTERACTIVE BACKGROUND CSS (RETAINED) --- */
/* Target the body or a container that wraps the whole page content */
body {
    /* Subtle base colors for the gradient */
    background: linear-gradient(-45deg, #f0f8ff, #e6e6fa, #f0f0f0, #ffffff);
    background-size: 400% 400%;
    /* Apply the animation */
    animation: gradient-shift 15s ease infinite;
}

/* Keyframes for the smooth, slow background movement */
@keyframes gradient-shift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}
/* --- END INTERACTIVE BACKGROUND CSS --- */


/* Original styles for card presentation (RETAINED) */
.book-cover-image {
    height: 200px; /* smaller cover */
    object-fit: cover;
}
.card-body {
    padding: 0.75rem; /* smaller padding */
}
.text-small {
    font-size: 0.85rem; /* slightly smaller text */
}

/* NEW: Custom Button Group Style */
.btn-group .btn-secondary-subtle {
    /* Use a light secondary color for a modern, muted look */
    background-color: #e9ecef; /* Light grey */
    color: #495057; /* Dark text */
    border-color: #ced4da;
}
.btn-group .btn-secondary-subtle:hover {
    background-color: #ced4da;
    color: #212529;
}
</style>

<div class="row">
    {% for book in books %}
        <div class="col-md-4 col-lg-3 mb-4"> 
            <div class="card shadow-lg h-100 border-0 rounded-3">
                
                <div class="book-image-container">
                    {% if book.image %}
                        <img src="{{ book.image.url }}" class="book-cover-image card-img-top" alt="{{ book.title }}">
                    {% else %}
                        <img src="https://via.placeholder.com/600x400?text=No+Cover+Available" class="book-cover-image card-img-top placeholder-bg" alt="No Image Available">
                    {% endif %}
                </div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-truncate">{{ book.title }}</h5>
                    <h6 class="card-subtitle mb-2 text-muted">by {{ book.author }}</h6>
                    <p class="card-text text-small text-secondary">{{ book.description|truncatechars:100 }}</p>

                    <div class="mt-auto pt-3 border-top d-flex justify-content-between align-items-center">
                        <div class="btn-group w-100" role="group">
                            <a href="{% url 'book_detail' book.pk %}" class="btn btn-secondary-subtle btn-sm flex-fill">
                                <i class="bi bi-eye me-1"></i> View
                            </a>
                            <a href="{% url 'book_update' book.pk %}" class="btn btn-secondary-subtle btn-sm flex-fill">
                                <i class="bi bi-pencil-square me-1"></i> Edit
                            </a>
                            <a href="{% url 'book_delete' book.pk %}" class="btn btn-danger btn-sm flex-fill">
                                <i class="bi bi-trash me-1"></i> Delete
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% empty %}
        <div class="col-12">
            <div class="alert alert-info text-center" role="alert">
                <i class="bi bi-info-circle me-2"></i> No books available. Please use the "Add New Book" button to populate the catalog.
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}